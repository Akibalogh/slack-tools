# Commission Calculator Output Structure

## Directory Overview

The output directory is organized into two main folders to separate NotebookLM analysis files from commission analysis outputs:

```
output/
├── notebooklm/          # Files for NotebookLM analysis
│   ├── etl_output.txt   # ETL data output (main data file)
│   ├── business_context.md
│   ├── deal_stages.md
│   ├── sales_team.md
│   ├── company_mapping.md
│   ├── data_sources.md
│   └── notebooklm_integration_guide.md
└── analysis/            # Commission analysis outputs
    └── (commission analysis files will be generated here)
```

## NotebookLM Folder

### Purpose
Contains all files needed for intelligent analysis with NotebookLM, including documentation and data.

### Files Description

#### `etl_output.txt`
- **Purpose**: Main ETL data output in human-readable text format
- **Content**: Processed data from Slack, Telegram, Calendar, and HubSpot
- **Format**: Structured text optimized for AI analysis
- **Usage**: Upload to NotebookLM for data analysis

#### `business_context.md`
- **Purpose**: System overview and business context
- **Content**: Commission calculator purpose, business objectives, key metrics
- **Usage**: Helps NotebookLM understand the business context

#### `deal_stages.md`
- **Purpose**: Deal stage definitions and lifecycle documentation
- **Content**: Stage definitions, transition criteria, activity weighting
- **Usage**: Enables NotebookLM to identify deal stages

#### `sales_team.md`
- **Purpose**: Sales team structure and commission rules
- **Content**: Team hierarchy, commission splitting rules, ownership logic
- **Usage**: Helps NotebookLM determine ownership and commission splits

#### `company_mapping.md`
- **Purpose**: Company entity resolution and mapping rules
- **Content**: Company variant handling, mapping rules, entity relationships
- **Usage**: Enables NotebookLM to resolve company name variants

#### `data_sources.md`
- **Purpose**: Data source meanings and interpretations
- **Content**: Slack, Telegram, Calendar, HubSpot data field meanings
- **Usage**: Helps NotebookLM understand data context and meaning

#### `notebooklm_integration_guide.md`
- **Purpose**: Instructions for using the system with NotebookLM
- **Content**: Upload instructions, example queries, troubleshooting
- **Usage**: Guide for effective NotebookLM interaction

## Analysis Folder

### Purpose
Contains commission analysis outputs and reports generated by the commission processing system.

### Files (Generated by Commission Processing)
- `commission_analysis.csv` - Detailed commission calculations
- `deal_rationale.csv` - Commission split justifications
- `team_performance.csv` - Team performance metrics
- `commission_summary.txt` - Human-readable commission summary

## Usage Instructions

### For NotebookLM Analysis
1. Upload all files from `notebooklm/` folder to NotebookLM
2. Start with the documentation files, then upload `etl_output.txt`
3. Use the integration guide for example queries
4. Ask questions about deals, ownership, and commission distribution

### For Commission Analysis
1. Run ETL process: `python main.py etl`
2. Run commission processing: `python main.py commission`
3. Check `analysis/` folder for generated reports
4. Review commission calculations and justifications

### For Full Pipeline
1. Run both ETL and commission processing: `python main.py both`
2. Check both `notebooklm/` and `analysis/` folders
3. Use NotebookLM for intelligent analysis
4. Use analysis files for detailed commission reports

## File Updates

### ETL Output Updates
- Run `python main.py etl --force-etl` to regenerate ETL output
- New data will be written to `notebooklm/etl_output.txt`
- Upload updated file to NotebookLM for fresh analysis

### Documentation Updates
- Documentation files are static and updated manually
- Update when business rules or processes change
- Re-upload to NotebookLM after updates

### Analysis Updates
- Analysis files are regenerated each time commission processing runs
- Files in `analysis/` folder are overwritten with each run
- Keep backups of important analysis results

## Best Practices

### NotebookLM Usage
- Upload files in the order specified in the integration guide
- Start with broad questions, then drill down to specifics
- Reference documentation when asking complex questions
- Validate NotebookLM responses against business rules

### Data Management
- Keep ETL output current for accurate analysis
- Regular backups of important analysis results
- Monitor data quality and completeness
- Update documentation when processes change

### Commission Analysis
- Review commission calculations for accuracy
- Validate against business rules and team agreements
- Document any manual overrides or adjustments
- Use NotebookLM insights to improve commission logic

## Troubleshooting

### Common Issues
- **Missing ETL Output**: Run ETL process first
- **Outdated Data**: Regenerate ETL output with `--force-etl`
- **NotebookLM Errors**: Check file upload order and format
- **Commission Issues**: Verify business rules and data quality

### Support
- Check integration guide for NotebookLM issues
- Review documentation for business rule questions
- Validate data quality before analysis
- Contact system administrator for technical issues
