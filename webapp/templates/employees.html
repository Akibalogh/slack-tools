{% extends "base.html" %}

{% block title %}Team Members - Customer Group Admin{% endblock %}

{% block content %}
<div style="margin-bottom: 20px;">
    <h2>Team Members ({{ employees|length }})</h2>
    <p style="color: #666; margin-top: 10px;">
        ℹ️ This is a read-only view. Use command-line scripts to manage team members.
    </p>
</div>

<div class="card">
    <table id="employees-table">
        <thead>
            <tr>
                <th style="cursor: pointer;" onclick="sortTable(0)">Name ↕</th>
                <th>Email</th>
                <th>Slack</th>
                <th>Telegram</th>
                <th style="cursor: pointer; text-align: center;" onclick="sortTable(4)">Req. Slack ↕</th>
                <th style="cursor: pointer; text-align: center;" onclick="sortTable(5)">Req. Telegram ↕</th>
            </tr>
        </thead>
        <tbody>
            {% for employee in employees %}
            <tr>
                <td><strong>{{ employee.name }}</strong></td>
                <td>{{ employee.email or '-' }}</td>
                <td>{{ employee.name if employee.slack_username else '-' }}</td>
                <td>@{{ employee.telegram_username if employee.telegram_username else '-' }}</td>
                <td style="text-align: center; font-size: 18px;">
                    {% if employee.slack_required %}✓{% else %}-{% endif %}
                </td>
                <td style="text-align: center; font-size: 18px;">
                    {% if employee.telegram_required %}✓{% else %}-{% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
function sortTable(columnIndex) {
    const table = document.getElementById('employees-table');
    const tbody = table.querySelector('tbody');
    const rows = Array.from(tbody.querySelectorAll('tr'));
    
    // Toggle sort direction
    const isAscending = table.dataset.sortDirection !== 'asc';
    table.dataset.sortDirection = isAscending ? 'asc' : 'desc';
    
    rows.sort((a, b) => {
        const aText = a.cells[columnIndex].textContent.trim();
        const bText = b.cells[columnIndex].textContent.trim();
        
        if (aText === bText) return 0;
        if (aText < bText) return isAscending ? -1 : 1;
        return isAscending ? 1 : -1;
    });
    
    rows.forEach(row => tbody.appendChild(row));
}
</script>

{% endblock %}

