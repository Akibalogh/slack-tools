[
    {
        "user": "U088UV6MKFE",
        "type": "message",
        "ts": "1745937700.246819",
        "client_msg_id": "863d315a-b2b9-413c-9204-7ba8f08b4c53",
        "text": "Hey <@UEHLS0JUB>!\n\nSince updating to `v3.3.0-...` version for the SDK, I can no longer use `codegen`.\n\nI get\n```*[main][~\/Coding\/dlc-link\/daml-sandbox\/simple-contract]$ daml codegen js -o daml.js .daml\/dist\/simple-contract-0.0.1.dar\ndaml2js: user error (Duplicate name 'daml-prim-0.0.0' for different packages detected)\ndaml-helper: Received ExitFailure 1 when running\nRaw command: \/Users\/scolear\/.daml\/sdk\/3.3.0-snapshot.20250417.0\/daml2js\/daml2js -o daml.js .daml\/dist\/simple-contract-0.0.1.dar```\nwith a `daml.yaml`\n```sdk-version: 3.3.0-snapshot.20250417.0\nname: simple-contract\nversion: 0.0.1\nsource: daml\ndependencies:\n  - daml-prim\n  - daml-stdlib\ndata-dependencies:\n  - ..\/dars\/splice-util-0.1.2.dar\n  - ..\/dars\/utility-registry-holding-v0-0.0.1.dar\nbuild-options:\n  - --target=2.1\n  - --ghc-option=-Wunused-binds\n  - --ghc-option=-Wunused-matches```\nRemoving daml-prim doesn't help, and I don't think a higher `--target` exists then 2.1 I can use? At least I couldn't find one which was not red.\n\nNot a huge issue as we are wrapping the API ourselves, but still, couldve used those types",
        "team": "T05FWTX7PMG",
        "user_team": "T05FWTX7PMG",
        "source_team": "T05FWTX7PMG",
        "user_profile": {
            "avatar_hash": "88f054e6b2e2",
            "image_72": "https:\/\/avatars.slack-edge.com\/2025-04-15\/8759384805844_88f054e6b2e25bb0bd26_72.jpg",
            "first_name": "Robert",
            "real_name": "Robert Tera",
            "display_name": "Robert Tera",
            "team": "T05FWTX7PMG",
            "name": "robert",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1745937700.246819",
        "reply_count": 3,
        "reply_users_count": 1,
        "latest_reply": "1745940665.683259",
        "reply_users": [
            "U088UV6MKFE"
        ],
        "replies": [
            {
                "user": "U088UV6MKFE",
                "ts": "1745939577.714179"
            },
            {
                "user": "U088UV6MKFE",
                "ts": "1745939932.252059"
            },
            {
                "user": "U088UV6MKFE",
                "ts": "1745940665.683259"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ko6rA",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hey "
                            },
                            {
                                "type": "user",
                                "user_id": "UEHLS0JUB"
                            },
                            {
                                "type": "text",
                                "text": "!\n\nSince updating to "
                            },
                            {
                                "type": "text",
                                "text": "v3.3.0-...",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " version for the SDK, I can no longer use "
                            },
                            {
                                "type": "text",
                                "text": "codegen",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ".\n\nI get\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "*[main][~\/Coding\/dlc-link\/daml-sandbox\/simple-contract]$ daml codegen js -o daml.js .daml\/dist\/simple-contract-0.0.1.dar\ndaml2js: user error (Duplicate name 'daml-prim-0.0.0' for different packages detected)\ndaml-helper: Received ExitFailure 1 when running\nRaw command: \/Users\/scolear\/.daml\/sdk\/3.3.0-snapshot.20250417.0\/daml2js\/daml2js -o daml.js .daml\/dist\/simple-contract-0.0.1.dar"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "with a "
                            },
                            {
                                "type": "text",
                                "text": "daml.yaml",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "sdk-version: 3.3.0-snapshot.20250417.0\nname: simple-contract\nversion: 0.0.1\nsource: daml\ndependencies:\n  - daml-prim\n  - daml-stdlib\ndata-dependencies:\n  - ..\/dars\/splice-util-0.1.2.dar\n  - ..\/dars\/utility-registry-holding-v0-0.0.1.dar\nbuild-options:\n  - --target=2.1\n  - --ghc-option=-Wunused-binds\n  - --ghc-option=-Wunused-matches"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Removing daml-prim doesn't help, and I don't think a higher "
                            },
                            {
                                "type": "text",
                                "text": "--target",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " exists then 2.1 I can use? At least I couldn't find one which was not red.\n\nNot a huge issue as we are wrapping the API ourselves, but still, couldve used those types"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U088UV6MKFE",
        "type": "message",
        "ts": "1745939577.714179",
        "client_msg_id": "03d8e427-7e46-4157-b838-296f4a8e78c4",
        "text": "This is in a repo called `daml-sandbox`  (I should probably rename it)\n\nI sent an invite to <https:\/\/github.com\/moritzkiefer-da>!\n\nRepro:\n`cd simple-contract`\n`daml build`\n`daml codegen js -o daml.js .daml\/dist\/simple-contract-0.0.1.dar`\nThrows the error",
        "team": "T05FWTX7PMG",
        "user_team": "T05FWTX7PMG",
        "source_team": "T05FWTX7PMG",
        "user_profile": {
            "avatar_hash": "88f054e6b2e2",
            "image_72": "https:\/\/avatars.slack-edge.com\/2025-04-15\/8759384805844_88f054e6b2e25bb0bd26_72.jpg",
            "first_name": "Robert",
            "real_name": "Robert Tera",
            "display_name": "Robert Tera",
            "team": "T05FWTX7PMG",
            "name": "robert",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1745937700.246819",
        "parent_user_id": "U088UV6MKFE",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PzhmX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This is in a repo called "
                            },
                            {
                                "type": "text",
                                "text": "daml-sandbox",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  (I should probably rename it)\n\nI sent an invite to "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/moritzkiefer-da"
                            },
                            {
                                "type": "text",
                                "text": "!\n\nRepro:\n"
                            },
                            {
                                "type": "text",
                                "text": "cd simple-contract",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "daml build",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "daml codegen js -o daml.js .daml\/dist\/simple-contract-0.0.1.dar",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nThrows the error"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U088UV6MKFE",
        "type": "message",
        "ts": "1745939932.252059",
        "client_msg_id": "3b667a22-08fe-4ca2-b2f3-1bd190d77ed0",
        "text": "yes",
        "team": "T05FWTX7PMG",
        "user_team": "T05FWTX7PMG",
        "source_team": "T05FWTX7PMG",
        "user_profile": {
            "avatar_hash": "88f054e6b2e2",
            "image_72": "https:\/\/avatars.slack-edge.com\/2025-04-15\/8759384805844_88f054e6b2e25bb0bd26_72.jpg",
            "first_name": "Robert",
            "real_name": "Robert Tera",
            "display_name": "Robert Tera",
            "team": "T05FWTX7PMG",
            "name": "robert",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1745937700.246819",
        "parent_user_id": "U088UV6MKFE",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "IB8ze",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yes"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U088UV6MKFE",
        "type": "message",
        "ts": "1745940665.683259",
        "client_msg_id": "f5c12735-01f1-4f84-9a00-b202d37ada7d",
        "text": "Thanks a lot for checking. I found some older forum posts about this same error:\n<https:\/\/discuss.daml.com\/t\/codegen-js-failing-with-new-2-9-1-sdk-daml-finance-dependencies\/7321>\n\nIt's good and will prove useful you will have our sandbox going forward though! :smile:",
        "team": "T05FWTX7PMG",
        "user_team": "T05FWTX7PMG",
        "source_team": "T05FWTX7PMG",
        "user_profile": {
            "avatar_hash": "88f054e6b2e2",
            "image_72": "https:\/\/avatars.slack-edge.com\/2025-04-15\/8759384805844_88f054e6b2e25bb0bd26_72.jpg",
            "first_name": "Robert",
            "real_name": "Robert Tera",
            "display_name": "Robert Tera",
            "team": "T05FWTX7PMG",
            "name": "robert",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1745937700.246819",
        "parent_user_id": "U088UV6MKFE",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "G1KWl",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks a lot for checking. I found some older forum posts about this same error:\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/discuss.daml.com\/t\/codegen-js-failing-with-new-2-9-1-sdk-daml-finance-dependencies\/7321"
                            },
                            {
                                "type": "text",
                                "text": "\n\nIt's good and will prove useful you will have our sandbox going forward though! "
                            },
                            {
                                "type": "emoji",
                                "name": "smile",
                                "unicode": "1f604"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]